---

title: Title

keywords: fastai
sidebar: home_sidebar

summary: "summary"
description: "summary"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/resume.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="TODOs">TODOs<a class="anchor-link" href="#TODOs"> </a></h2><ul>
<li>in compose_tfms2 return a custom type</li>
<li>this custom type should handle ToTensor</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">fastai2.basics</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">fastai2.text.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pigboat.text.all</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">snorkel.labeling</span> <span class="kn">import</span> <span class="n">model</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">source</span> <span class="o">=</span> <span class="n">untar_data</span><span class="p">(</span><span class="n">URLs</span><span class="o">.</span><span class="n">IMDB_SAMPLE</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">source</span><span class="o">/</span><span class="s1">&#39;texts.csv&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">splits</span> <span class="o">=</span> <span class="n">ColSplitter</span><span class="p">(</span><span class="s1">&#39;is_valid&#39;</span><span class="p">)(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">POS</span><span class="p">,</span><span class="n">NEG</span> <span class="o">=</span> <span class="s1">&#39;positive&#39;</span><span class="p">,</span><span class="s1">&#39;negative&#39;</span>
<span class="n">vocab</span> <span class="o">=</span> <span class="n">ABSTAIN</span><span class="p">,</span><span class="n">POS</span><span class="p">,</span><span class="n">NEG</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">POS_WORDS</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;enjoy&#39;</span><span class="p">,</span> <span class="s1">&#39;liked&#39;</span><span class="p">,</span> <span class="s1">&#39;love&#39;</span><span class="p">,</span> <span class="s1">&#39;masterpiece&#39;</span><span class="p">,</span> <span class="s1">&#39;enjoyed&#39;</span><span class="p">,</span> <span class="s1">&#39;loved&#39;</span><span class="p">,</span> <span class="s1">&#39;nice&#39;</span><span class="p">,</span> <span class="s1">&#39;good acting&#39;</span><span class="p">]</span>
<span class="n">NEG_WORDS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hate&#39;</span><span class="p">,</span> <span class="s1">&#39;poor&#39;</span><span class="p">,</span> <span class="s1">&#39;bad&#39;</span><span class="p">,</span> <span class="s1">&#39;hated&#39;</span><span class="p">,</span> <span class="s1">&#39;dislike&#39;</span><span class="p">,</span> <span class="s1">&#39;disliked&#39;</span><span class="p">,</span> <span class="s1">&#39;suck&#39;</span><span class="p">,</span> <span class="s1">&#39;lame&#39;</span><span class="p">,</span> <span class="s1">&#39;worst&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lblr</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">lblr</span> <span class="o">+=</span> <span class="p">[</span><span class="n">WordLabeller</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">POS</span><span class="p">)</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">POS_WORDS</span><span class="p">]</span>
<span class="n">lblr</span> <span class="o">+=</span> <span class="p">[</span><span class="n">WordLabeller</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">NEG</span><span class="p">)</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">NEG_WORDS</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Numericalize2</span><span class="p">(</span><span class="n">Numericalize</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
        <span class="n">set_trace</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">setups</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dset_items</span> <span class="o">=</span> <span class="n">Datasets</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="p">[[</span><span class="n">ColReader</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">),</span> <span class="n">Tokenizer</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">),</span> <span class="n">Numericalize2</span><span class="p">()],</span>
                           <span class="p">[</span><span class="n">ColReader</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">),</span> <span class="n">Categorize</span><span class="p">]],</span> <span class="n">splits</span><span class="o">=</span><span class="n">splits</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&gt; &lt;ipython-input-17-396fa7a48168&gt;(4)setups()
-&gt; super().setups(items)
(Pdb) items.text
*** AttributeError: text
(Pdb) items[0].text
*** AttributeError: &#39;Tokens&#39; object has no attribute &#39;text&#39;
(Pdb) len(items)
800
(Pdb) items
TfmdLists:         label  is_valid  \
0    negative     False   
1    positive     False   
2    negative     False   
3    positive     False   
4    negative     False   
..        ...       ...   
795  negative     False   
796  negative     False   
797  positive     False   
798  negative     False   
799  negative     False   

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        text  \
0    [xxbos, xxmaj, un, -, bleeping, -, believable, !, xxmaj, meg, xxmaj, ryan, does, n&#39;t, even, look, her, usual, pert, lovable, self, in, this, ,, which, normally, makes, me, forgive, her, shallow, ticky, acting, schtick, ., xxmaj, hard, to, believe, she, was, the, producer, on, this, dog, ., xxmaj, plus, xxmaj, kevin, xxmaj, kline, :, what, kind, of, suicide, trip, has, his, career, been, on, ?, xxmaj, whoosh, …, xxmaj, banzai, xxrep, 3, !, xxmaj, finally, this, was, directed, by, the, guy, who, did, xxmaj, big, xxmaj, chill, ?, xxmaj, must, be, a, replay, of, xxmaj, jonestown, -, hollywood,...   
1                   [xxbos, xxmaj, this, is, a, extremely, well, -, made, film, ., xxmaj, the, acting, ,, script, and, camera, -, work, are, all, first, -, rate, ., xxmaj, the, music, is, good, ,, too, ,, though, it, is, mostly, early, in, the, film, ,, when, things, are, still, relatively, cheery, ., xxmaj, there, are, no, really, superstars, in, the, cast, ,, though, several, faces, will, be, familiar, ., xxmaj, the, entire, cast, does, an, excellent, job, with, the, script, ., \n\n, xxmaj, but, it, is, hard, to, watch, ,, because, there, is, no, good, end, to, a, situation, like, the, one, ...]   
2       [xxbos, xxmaj, every, once, in, a, long, while, a, movie, will, come, along, that, will, be, so, awful, that, i, feel, compelled, to, warn, people, ., xxmaj, if, i, labor, all, my, days, and, i, can, save, but, one, soul, from, watching, this, movie, ,, how, great, will, be, my, joy, ., \n\n, xxmaj, where, to, begin, my, discussion, of, pain, ., xxmaj, for, starters, ,, there, was, a, musical, montage, every, five, minutes, ., xxmaj, there, was, no, character, development, ., xxmaj, every, character, was, a, stereotype, ., xxmaj, we, had, swearing, guy, ,, fat, guy, who, eats, donuts, ...]   
3    [xxbos, xxmaj, name, just, says, it, all, ., i, watched, this, movie, with, my, dad, when, it, came, out, and, having, served, in, xxmaj, korea, he, had, great, admiration, for, the, man, ., xxmaj, the, disappointing, thing, about, this, film, is, that, it, only, concentrate, on, a, short, period, of, the, man, &#39;s, life, -, interestingly, enough, the, man, &#39;s, entire, life, would, have, made, such, an, epic, bio, -, pic, that, it, is, staggering, to, imagine, the, cost, for, production, ., \n\n, xxmaj, some, posters, elude, to, the, flawed, characteristics, about, the, man, ,, which, are, ...   
4           [xxbos, xxmaj, this, movie, succeeds, at, being, one, of, the, most, unique, movies, you, &#39;ve, seen, ., xxmaj, however, this, comes, from, the, fact, that, you, ca, n&#39;t, make, heads, or, tails, of, this, mess, ., xxmaj, it, almost, seems, as, a, series, of, challenges, set, up, to, determine, whether, or, not, you, are, willing, to, walk, out, of, the, movie, and, give, up, the, money, you, just, paid, ., xxmaj, if, you, do, n&#39;t, want, to, feel, slighted, you, &#39;ll, sit, through, this, horrible, film, and, develop, a, real, sense, of, pity, for, the, actors, involved, ,, they, &#39;ve, ...]   
..                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       ...   
795  [xxbos, xxmaj, the, ghost, of, the, xxmaj, vietnam, war, has, haunted, the, xxmaj, american, psyche, for, thirty, years, now, ., xxmaj, if, not, because, of, the, fact, that, tens, of, thousands, of, xxmaj, american, soldiers, went, xxup, mia, in, xxmaj, vietnam, ,, or, the, manner, in, which, those, who, returned, were, treated, ,, then, because, it, was, the, first, war, that, xxmaj, america, could, be, said, to, have, lost, ., xxmaj, many, men, came, home, from, the, war, a, shadow, of, their, former, selves, ,, and, the, original, xxmaj, first, xxmaj, blood, managed, to, provide, a, sm...   
796  [xxbos, xxmaj, thin, story, concerns, two, small, town, brothers, and, their, struggles, over, family, honor, ., xxmaj, david, xxmaj, morse, is, the, responsible, ,, straight, -, laced, cop, and, &#39;, good, &#39;, brother, ;, xxmaj, viggo, xxmaj, mortensen, ,, the, &#39;, bad, &#39;, boy, ,, is, a, former, soldier, and, ex, -, convict, ., xxmaj, as, an, actor, (, particularly, in, his, earliest, years, ), ,, xxmaj, sean, xxmaj, penn, seems, to, have, modulated, his, performances, under, the, xxmaj, method, ., xxmaj, turning, first, -, time, writer, and, director, for, this, arty, ,, obtuse, drama, ,, he...   
797  [xxbos, xxmaj, not, everything, is, said, in, this, excellent, first, feature, from, xxmaj, céline, xxmaj, sciamma, ., xxmaj, the, friendship, ,, the, &#34;, wanting, to, fit, in, &#34;, ,, the, first, sexual, feelings, …, xxmaj, all, this, and, much, more, is, sublimated, through, the, underwater, synchro, swimming, scenes, ., \n\n, xxmaj, all, three, girls, in, the, movie, try, to, find, and, express, their, personality, in, a, very, different, way, ., xxmaj, it, is, a, much, less, violent, approach, to, the, understanding, of, the, teenage, years, compared, to, ,, say, ,, &#34;, thirteen, &#34;, ,, but...   
798                                          [xxbos, xxmaj, this, is, just, horrible, ,, really, horrible, trash, ., xxmaj, yes, ,, we, &#39;ve, got, beautiful, naked, women, dancing, and, having, sex, ., xxmaj, but, while, this, may, work, in, the, mechanism, of, a, porn, movie, , may, have, even, been, a, hit, as, a, porn, movie, , this, tries, to, mask, itself, as, a, &#34;, film, &#34;, with, actual, things, to, say, ,, with, real, emotion, and, struggle, ., xxmaj, it, is, n&#39;t, ., xxmaj, it, &#39;s, an, excuse, to, get, some, girls, naked, and, have, a, fun, time, ., xxmaj, i, &#39;m, sure, all, of, these, ...]   
799       [xxbos, i, do, n&#39;t, often, go, out, of, my, way, to, write, comments, ,, but, for, this, i, had, to, ,, just, to, warn, anyone, that, might, think, that, by, watching, this, they, will, see, a, comedy, ., xxmaj, this, does, n&#39;t, come, close, ., xxmaj, while, the, premise, (, change, in, colour, /, gender, /, whatever, ), is, bad, enough, (, and, has, been, done, ,, better, ,, many, times, before)the, actual, transformation, of, two, black, guys, into, two, white, girls, is, one, of, the, least, convincing, transformations, ever, put, on, screen, ., xxmaj, it, would, be, bad, enough, ...]   

     text_length  
0            108  
1            462  
2            220  
3            184  
4            398  
..           ...  
795          970  
796          246  
797          133  
798          317  
799          225  

[800 rows x 4 columns]
tfms - (#2) [ColReader: (object,object) -&gt; ColReader ,Tokenizer: (str,object) -&gt; encodes
(Path,object) -&gt; encodes (object,object) -&gt; decodes]
(Pdb) type(items)
&lt;class &#39;fastai2.data.core.TfmdLists&#39;&gt;
(Pdb) len(items)
800
(Pdb) items[0].text
*** AttributeError: &#39;Tokens&#39; object has no attribute &#39;text&#39;
(Pdb) items[0]
(#108) [&#39;xxbos&#39;,&#39;xxmaj&#39;,&#39;un&#39;,&#39;-&#39;,&#39;bleeping&#39;,&#39;-&#39;,&#39;believable&#39;,&#39;!&#39;,&#39;xxmaj&#39;,&#39;meg&#39;...]
(Pdb) exit
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">BdbQuit</span>                                   Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-20-58e2c954d910&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> dset_items = Datasets(df, [[ColReader(&#39;text&#39;), Tokenizer.from_df(&#39;text&#39;), Numericalize2()],
<span class="ansi-green-fg">----&gt; 2</span><span class="ansi-red-fg">                            [ColReader(&#39;label&#39;), Categorize]], splits=splits)
</span>
<span class="ansi-green-fg">~/git/fastai2/fastai2/data/core.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">(self, items, tfms, tls, n_inp, dl_type, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    282</span>     <span class="ansi-green-fg">def</span> __init__<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> tfms<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> tls<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> n_inp<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> dl_type<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    283</span>         super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__init__<span class="ansi-blue-fg">(</span>dl_type<span class="ansi-blue-fg">=</span>dl_type<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 284</span><span class="ansi-red-fg">         </span>self<span class="ansi-blue-fg">.</span>tls <span class="ansi-blue-fg">=</span> L<span class="ansi-blue-fg">(</span>tls <span class="ansi-green-fg">if</span> tls <span class="ansi-green-fg">else</span> <span class="ansi-blue-fg">[</span>TfmdLists<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">,</span> t<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> t <span class="ansi-green-fg">in</span> L<span class="ansi-blue-fg">(</span>ifnone<span class="ansi-blue-fg">(</span>tfms<span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">[</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    285</span>         self<span class="ansi-blue-fg">.</span>n_inp <span class="ansi-blue-fg">=</span> ifnone<span class="ansi-blue-fg">(</span>n_inp<span class="ansi-blue-fg">,</span> max<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">,</span> len<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>tls<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    286</span> 

<span class="ansi-green-fg">~/git/fastai2/fastai2/data/core.py</span> in <span class="ansi-cyan-fg">&lt;listcomp&gt;</span><span class="ansi-blue-fg">(.0)</span>
<span class="ansi-green-intense-fg ansi-bold">    282</span>     <span class="ansi-green-fg">def</span> __init__<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> tfms<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> tls<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> n_inp<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> dl_type<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    283</span>         super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__init__<span class="ansi-blue-fg">(</span>dl_type<span class="ansi-blue-fg">=</span>dl_type<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 284</span><span class="ansi-red-fg">         </span>self<span class="ansi-blue-fg">.</span>tls <span class="ansi-blue-fg">=</span> L<span class="ansi-blue-fg">(</span>tls <span class="ansi-green-fg">if</span> tls <span class="ansi-green-fg">else</span> <span class="ansi-blue-fg">[</span>TfmdLists<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">,</span> t<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> t <span class="ansi-green-fg">in</span> L<span class="ansi-blue-fg">(</span>ifnone<span class="ansi-blue-fg">(</span>tfms<span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">[</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    285</span>         self<span class="ansi-blue-fg">.</span>n_inp <span class="ansi-blue-fg">=</span> ifnone<span class="ansi-blue-fg">(</span>n_inp<span class="ansi-blue-fg">,</span> max<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">,</span> len<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>tls<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    286</span> 

<span class="ansi-green-fg">~/git/fastcore/fastcore/foundation.py</span> in <span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">(cls, x, *args, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">     45</span>             <span class="ansi-green-fg">return</span> x
<span class="ansi-green-intense-fg ansi-bold">     46</span> 
<span class="ansi-green-fg">---&gt; 47</span><span class="ansi-red-fg">         </span>res <span class="ansi-blue-fg">=</span> super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__call__<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span><span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">(</span>x<span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">+</span> args<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     48</span>         res<span class="ansi-blue-fg">.</span>_newchk <span class="ansi-blue-fg">=</span> <span class="ansi-cyan-fg">0</span>
<span class="ansi-green-intense-fg ansi-bold">     49</span>         <span class="ansi-green-fg">return</span> res

<span class="ansi-green-fg">~/git/fastai2/fastai2/data/core.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">(self, items, tfms, use_list, do_setup, split_idx, train_setup, splits, types, verbose)</span>
<span class="ansi-green-intense-fg ansi-bold">    220</span>         <span class="ansi-green-fg">if</span> do_setup<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    221</span>             pv<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">f&#34;Setting up {self.tfms}&#34;</span><span class="ansi-blue-fg">,</span> verbose<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 222</span><span class="ansi-red-fg">             </span>self<span class="ansi-blue-fg">.</span>setup<span class="ansi-blue-fg">(</span>train_setup<span class="ansi-blue-fg">=</span>train_setup<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    223</span> 
<span class="ansi-green-intense-fg ansi-bold">    224</span>     <span class="ansi-green-fg">def</span> _new<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">,</span> split_idx<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/git/fastai2/fastai2/data/core.py</span> in <span class="ansi-cyan-fg">setup</span><span class="ansi-blue-fg">(self, train_setup)</span>
<span class="ansi-green-intense-fg ansi-bold">    236</span> 
<span class="ansi-green-intense-fg ansi-bold">    237</span>     <span class="ansi-green-fg">def</span> setup<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 238</span><span class="ansi-red-fg">         </span>self<span class="ansi-blue-fg">.</span>tfms<span class="ansi-blue-fg">.</span>setup<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    239</span>         <span class="ansi-green-fg">if</span> len<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">!=</span> <span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    240</span>             x <span class="ansi-blue-fg">=</span> super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__getitem__<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>splits <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">else</span> super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__getitem__<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>splits<span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span>

<span class="ansi-green-fg">~/git/fastcore/fastcore/transform.py</span> in <span class="ansi-cyan-fg">setup</span><span class="ansi-blue-fg">(self, items, train_setup)</span>
<span class="ansi-green-intense-fg ansi-bold">    179</span>         tfms <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>fs<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">:</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">    180</span>         self<span class="ansi-blue-fg">.</span>fs<span class="ansi-blue-fg">.</span>clear<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 181</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">for</span> t <span class="ansi-green-fg">in</span> tfms<span class="ansi-blue-fg">:</span> self<span class="ansi-blue-fg">.</span>add<span class="ansi-blue-fg">(</span>t<span class="ansi-blue-fg">,</span>items<span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    182</span> 
<span class="ansi-green-intense-fg ansi-bold">    183</span>     <span class="ansi-green-fg">def</span> add<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span>t<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/git/fastcore/fastcore/transform.py</span> in <span class="ansi-cyan-fg">add</span><span class="ansi-blue-fg">(self, t, items, train_setup)</span>
<span class="ansi-green-intense-fg ansi-bold">    182</span> 
<span class="ansi-green-intense-fg ansi-bold">    183</span>     <span class="ansi-green-fg">def</span> add<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span>t<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 184</span><span class="ansi-red-fg">         </span>t<span class="ansi-blue-fg">.</span>setup<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    185</span>         self<span class="ansi-blue-fg">.</span>fs<span class="ansi-blue-fg">.</span>append<span class="ansi-blue-fg">(</span>t<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    186</span> 

<span class="ansi-green-fg">~/git/fastcore/fastcore/transform.py</span> in <span class="ansi-cyan-fg">setup</span><span class="ansi-blue-fg">(self, items, train_setup)</span>
<span class="ansi-green-intense-fg ansi-bold">     76</span>     <span class="ansi-green-fg">def</span> setup<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     77</span>         train_setup <span class="ansi-blue-fg">=</span> train_setup <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>train_setup <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">else</span> self<span class="ansi-blue-fg">.</span>train_setup
<span class="ansi-green-fg">---&gt; 78</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>setups<span class="ansi-blue-fg">(</span>getattr<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;train&#39;</span><span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">if</span> train_setup <span class="ansi-green-fg">else</span> items<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     79</span> 
<span class="ansi-green-intense-fg ansi-bold">     80</span>     <span class="ansi-green-fg">def</span> _call<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> fn<span class="ansi-blue-fg">,</span> x<span class="ansi-blue-fg">,</span> split_idx<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/git/fastcore/fastcore/dispatch.py</span> in <span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">(self, *args, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">     96</span>         <span class="ansi-green-fg">if</span> <span class="ansi-green-fg">not</span> f<span class="ansi-blue-fg">:</span> <span class="ansi-green-fg">return</span> args<span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">     97</span>         <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>inst <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">not</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span> f <span class="ansi-blue-fg">=</span> MethodType<span class="ansi-blue-fg">(</span>f<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">.</span>inst<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 98</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> f<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     99</span> 
<span class="ansi-green-intense-fg ansi-bold">    100</span>     <span class="ansi-green-fg">def</span> __get__<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> inst<span class="ansi-blue-fg">,</span> owner<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">&lt;ipython-input-17-396fa7a48168&gt;</span> in <span class="ansi-cyan-fg">setups</span><span class="ansi-blue-fg">(self, items)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>     <span class="ansi-green-fg">def</span> setups<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span>         set_trace<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">----&gt; 4</span><span class="ansi-red-fg">         </span>super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>setups<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-17-396fa7a48168&gt;</span> in <span class="ansi-cyan-fg">setups</span><span class="ansi-blue-fg">(self, items)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>     <span class="ansi-green-fg">def</span> setups<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span>         set_trace<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">----&gt; 4</span><span class="ansi-red-fg">         </span>super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>setups<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/anaconda3/envs/dl/lib/python3.7/bdb.py</span> in <span class="ansi-cyan-fg">trace_dispatch</span><span class="ansi-blue-fg">(self, frame, event, arg)</span>
<span class="ansi-green-intense-fg ansi-bold">     86</span>             <span class="ansi-green-fg">return</span> <span class="ansi-red-fg"># None</span>
<span class="ansi-green-intense-fg ansi-bold">     87</span>         <span class="ansi-green-fg">if</span> event <span class="ansi-blue-fg">==</span> <span class="ansi-blue-fg">&#39;line&#39;</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 88</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>dispatch_line<span class="ansi-blue-fg">(</span>frame<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     89</span>         <span class="ansi-green-fg">if</span> event <span class="ansi-blue-fg">==</span> <span class="ansi-blue-fg">&#39;call&#39;</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     90</span>             <span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>dispatch_call<span class="ansi-blue-fg">(</span>frame<span class="ansi-blue-fg">,</span> arg<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/anaconda3/envs/dl/lib/python3.7/bdb.py</span> in <span class="ansi-cyan-fg">dispatch_line</span><span class="ansi-blue-fg">(self, frame)</span>
<span class="ansi-green-intense-fg ansi-bold">    111</span>         <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>stop_here<span class="ansi-blue-fg">(</span>frame<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">or</span> self<span class="ansi-blue-fg">.</span>break_here<span class="ansi-blue-fg">(</span>frame<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    112</span>             self<span class="ansi-blue-fg">.</span>user_line<span class="ansi-blue-fg">(</span>frame<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 113</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>quitting<span class="ansi-blue-fg">:</span> <span class="ansi-green-fg">raise</span> BdbQuit
<span class="ansi-green-intense-fg ansi-bold">    114</span>         <span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>trace_dispatch
<span class="ansi-green-intense-fg ansi-bold">    115</span> 

<span class="ansi-red-fg">BdbQuit</span>: </pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipeline2</span><span class="p">([</span><span class="n">ColReader</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">),</span> <span class="n">Tokenizer</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">),</span> <span class="n">Numericalize2</span><span class="p">()],</span> <span class="n">lblr</span><span class="p">)</span>
<span class="n">pipe</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">pipe</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Pipeline2&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>TfmdLists.setup<span class="o">??</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_x</span> <span class="o">=</span> <span class="p">[</span><span class="n">pipe</span><span class="p">,</span> <span class="n">Categorize2</span><span class="p">(</span><span class="n">vocab</span><span class="o">=</span><span class="n">vocab</span><span class="p">)]</span>
<span class="c1"># get_y = [ColReader(&#39;label&#39;), Categorize(vocab=vocab)]</span>
<span class="n">dset_train</span> <span class="o">=</span> <span class="n">Datasets</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="p">[</span><span class="n">get_x</span><span class="p">],</span> <span class="n">splits</span><span class="o">=</span><span class="n">splits</span><span class="p">)</span><span class="o">.</span><span class="n">train</span>
<span class="c1"># dset_valid = Datasets(df, [get_x, get_y], splits=splits, do_setup=False).valid</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&gt; &lt;ipython-input-17-396fa7a48168&gt;(4)setups()
-&gt; super().setups(items)
(Pdb) items[0]
label                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         negative
is_valid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         False
text           [xxbos, xxmaj, un, -, bleeping, -, believable, !, xxmaj, meg, xxmaj, ryan, does, n&#39;t, even, look, her, usual, pert, lovable, self, in, this, ,, which, normally, makes, me, forgive, her, shallow, ticky, acting, schtick, ., xxmaj, hard, to, believe, she, was, the, producer, on, this, dog, ., xxmaj, plus, xxmaj, kevin, xxmaj, kline, :, what, kind, of, suicide, trip, has, his, career, been, on, ?, xxmaj, whoosh, …, xxmaj, banzai, xxrep, 3, !, xxmaj, finally, this, was, directed, by, the, guy, who, did, xxmaj, big, xxmaj, chill, ?, xxmaj, must, be, a, replay, of, xxmaj, jonestown, -, hollywood,...
text_length                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        108
Name: 0, dtype: object
(Pdb) exit
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">BdbQuit</span>                                   Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-22-23a8322db951&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> get_x <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span>pipe<span class="ansi-blue-fg">,</span> Categorize2<span class="ansi-blue-fg">(</span>vocab<span class="ansi-blue-fg">=</span>vocab<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span class="ansi-red-fg"># get_y = [ColReader(&#39;label&#39;), Categorize(vocab=vocab)]</span>
<span class="ansi-green-fg">----&gt; 3</span><span class="ansi-red-fg"> </span>dset_train <span class="ansi-blue-fg">=</span> Datasets<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">[</span>get_x<span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">,</span> splits<span class="ansi-blue-fg">=</span>splits<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>train
<span class="ansi-green-intense-fg ansi-bold">      4</span> <span class="ansi-red-fg"># dset_valid = Datasets(df, [get_x, get_y], splits=splits, do_setup=False).valid</span>

<span class="ansi-green-fg">~/git/fastai2/fastai2/data/core.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">(self, items, tfms, tls, n_inp, dl_type, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    282</span>     <span class="ansi-green-fg">def</span> __init__<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> tfms<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> tls<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> n_inp<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> dl_type<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    283</span>         super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__init__<span class="ansi-blue-fg">(</span>dl_type<span class="ansi-blue-fg">=</span>dl_type<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 284</span><span class="ansi-red-fg">         </span>self<span class="ansi-blue-fg">.</span>tls <span class="ansi-blue-fg">=</span> L<span class="ansi-blue-fg">(</span>tls <span class="ansi-green-fg">if</span> tls <span class="ansi-green-fg">else</span> <span class="ansi-blue-fg">[</span>TfmdLists<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">,</span> t<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> t <span class="ansi-green-fg">in</span> L<span class="ansi-blue-fg">(</span>ifnone<span class="ansi-blue-fg">(</span>tfms<span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">[</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    285</span>         self<span class="ansi-blue-fg">.</span>n_inp <span class="ansi-blue-fg">=</span> ifnone<span class="ansi-blue-fg">(</span>n_inp<span class="ansi-blue-fg">,</span> max<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">,</span> len<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>tls<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    286</span> 

<span class="ansi-green-fg">~/git/fastai2/fastai2/data/core.py</span> in <span class="ansi-cyan-fg">&lt;listcomp&gt;</span><span class="ansi-blue-fg">(.0)</span>
<span class="ansi-green-intense-fg ansi-bold">    282</span>     <span class="ansi-green-fg">def</span> __init__<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> tfms<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> tls<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> n_inp<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> dl_type<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    283</span>         super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__init__<span class="ansi-blue-fg">(</span>dl_type<span class="ansi-blue-fg">=</span>dl_type<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 284</span><span class="ansi-red-fg">         </span>self<span class="ansi-blue-fg">.</span>tls <span class="ansi-blue-fg">=</span> L<span class="ansi-blue-fg">(</span>tls <span class="ansi-green-fg">if</span> tls <span class="ansi-green-fg">else</span> <span class="ansi-blue-fg">[</span>TfmdLists<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">,</span> t<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> t <span class="ansi-green-fg">in</span> L<span class="ansi-blue-fg">(</span>ifnone<span class="ansi-blue-fg">(</span>tfms<span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">[</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    285</span>         self<span class="ansi-blue-fg">.</span>n_inp <span class="ansi-blue-fg">=</span> ifnone<span class="ansi-blue-fg">(</span>n_inp<span class="ansi-blue-fg">,</span> max<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">,</span> len<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>tls<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    286</span> 

<span class="ansi-green-fg">~/git/fastcore/fastcore/foundation.py</span> in <span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">(cls, x, *args, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">     45</span>             <span class="ansi-green-fg">return</span> x
<span class="ansi-green-intense-fg ansi-bold">     46</span> 
<span class="ansi-green-fg">---&gt; 47</span><span class="ansi-red-fg">         </span>res <span class="ansi-blue-fg">=</span> super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__call__<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span><span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">(</span>x<span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">+</span> args<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     48</span>         res<span class="ansi-blue-fg">.</span>_newchk <span class="ansi-blue-fg">=</span> <span class="ansi-cyan-fg">0</span>
<span class="ansi-green-intense-fg ansi-bold">     49</span>         <span class="ansi-green-fg">return</span> res

<span class="ansi-green-fg">~/git/fastai2/fastai2/data/core.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">(self, items, tfms, use_list, do_setup, split_idx, train_setup, splits, types, verbose)</span>
<span class="ansi-green-intense-fg ansi-bold">    220</span>         <span class="ansi-green-fg">if</span> do_setup<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    221</span>             pv<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">f&#34;Setting up {self.tfms}&#34;</span><span class="ansi-blue-fg">,</span> verbose<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 222</span><span class="ansi-red-fg">             </span>self<span class="ansi-blue-fg">.</span>setup<span class="ansi-blue-fg">(</span>train_setup<span class="ansi-blue-fg">=</span>train_setup<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    223</span> 
<span class="ansi-green-intense-fg ansi-bold">    224</span>     <span class="ansi-green-fg">def</span> _new<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">,</span> split_idx<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/git/fastai2/fastai2/data/core.py</span> in <span class="ansi-cyan-fg">setup</span><span class="ansi-blue-fg">(self, train_setup)</span>
<span class="ansi-green-intense-fg ansi-bold">    236</span> 
<span class="ansi-green-intense-fg ansi-bold">    237</span>     <span class="ansi-green-fg">def</span> setup<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 238</span><span class="ansi-red-fg">         </span>self<span class="ansi-blue-fg">.</span>tfms<span class="ansi-blue-fg">.</span>setup<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    239</span>         <span class="ansi-green-fg">if</span> len<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">!=</span> <span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    240</span>             x <span class="ansi-blue-fg">=</span> super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__getitem__<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>splits <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">else</span> super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__getitem__<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>splits<span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span>

<span class="ansi-green-fg">~/git/fastcore/fastcore/transform.py</span> in <span class="ansi-cyan-fg">setup</span><span class="ansi-blue-fg">(self, items, train_setup)</span>
<span class="ansi-green-intense-fg ansi-bold">    179</span>         tfms <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>fs<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">:</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">    180</span>         self<span class="ansi-blue-fg">.</span>fs<span class="ansi-blue-fg">.</span>clear<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 181</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">for</span> t <span class="ansi-green-fg">in</span> tfms<span class="ansi-blue-fg">:</span> self<span class="ansi-blue-fg">.</span>add<span class="ansi-blue-fg">(</span>t<span class="ansi-blue-fg">,</span>items<span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    182</span> 
<span class="ansi-green-intense-fg ansi-bold">    183</span>     <span class="ansi-green-fg">def</span> add<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span>t<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/git/fastcore/fastcore/transform.py</span> in <span class="ansi-cyan-fg">add</span><span class="ansi-blue-fg">(self, t, items, train_setup)</span>
<span class="ansi-green-intense-fg ansi-bold">    182</span> 
<span class="ansi-green-intense-fg ansi-bold">    183</span>     <span class="ansi-green-fg">def</span> add<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span>t<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 184</span><span class="ansi-red-fg">         </span>t<span class="ansi-blue-fg">.</span>setup<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    185</span>         self<span class="ansi-blue-fg">.</span>fs<span class="ansi-blue-fg">.</span>append<span class="ansi-blue-fg">(</span>t<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    186</span> 

<span class="ansi-green-fg">~/git/fastcore/fastcore/transform.py</span> in <span class="ansi-cyan-fg">setup</span><span class="ansi-blue-fg">(self, items, train_setup)</span>
<span class="ansi-green-intense-fg ansi-bold">    179</span>         tfms <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>fs<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">:</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">    180</span>         self<span class="ansi-blue-fg">.</span>fs<span class="ansi-blue-fg">.</span>clear<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 181</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">for</span> t <span class="ansi-green-fg">in</span> tfms<span class="ansi-blue-fg">:</span> self<span class="ansi-blue-fg">.</span>add<span class="ansi-blue-fg">(</span>t<span class="ansi-blue-fg">,</span>items<span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    182</span> 
<span class="ansi-green-intense-fg ansi-bold">    183</span>     <span class="ansi-green-fg">def</span> add<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span>t<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/git/fastcore/fastcore/transform.py</span> in <span class="ansi-cyan-fg">add</span><span class="ansi-blue-fg">(self, t, items, train_setup)</span>
<span class="ansi-green-intense-fg ansi-bold">    182</span> 
<span class="ansi-green-intense-fg ansi-bold">    183</span>     <span class="ansi-green-fg">def</span> add<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span>t<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 184</span><span class="ansi-red-fg">         </span>t<span class="ansi-blue-fg">.</span>setup<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    185</span>         self<span class="ansi-blue-fg">.</span>fs<span class="ansi-blue-fg">.</span>append<span class="ansi-blue-fg">(</span>t<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    186</span> 

<span class="ansi-green-fg">~/git/fastcore/fastcore/transform.py</span> in <span class="ansi-cyan-fg">setup</span><span class="ansi-blue-fg">(self, items, train_setup)</span>
<span class="ansi-green-intense-fg ansi-bold">     76</span>     <span class="ansi-green-fg">def</span> setup<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> train_setup<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     77</span>         train_setup <span class="ansi-blue-fg">=</span> train_setup <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>train_setup <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">else</span> self<span class="ansi-blue-fg">.</span>train_setup
<span class="ansi-green-fg">---&gt; 78</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>setups<span class="ansi-blue-fg">(</span>getattr<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;train&#39;</span><span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">if</span> train_setup <span class="ansi-green-fg">else</span> items<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     79</span> 
<span class="ansi-green-intense-fg ansi-bold">     80</span>     <span class="ansi-green-fg">def</span> _call<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> fn<span class="ansi-blue-fg">,</span> x<span class="ansi-blue-fg">,</span> split_idx<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/git/fastcore/fastcore/dispatch.py</span> in <span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">(self, *args, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">     96</span>         <span class="ansi-green-fg">if</span> <span class="ansi-green-fg">not</span> f<span class="ansi-blue-fg">:</span> <span class="ansi-green-fg">return</span> args<span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">     97</span>         <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>inst <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">not</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span> f <span class="ansi-blue-fg">=</span> MethodType<span class="ansi-blue-fg">(</span>f<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">.</span>inst<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 98</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> f<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     99</span> 
<span class="ansi-green-intense-fg ansi-bold">    100</span>     <span class="ansi-green-fg">def</span> __get__<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> inst<span class="ansi-blue-fg">,</span> owner<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">&lt;ipython-input-17-396fa7a48168&gt;</span> in <span class="ansi-cyan-fg">setups</span><span class="ansi-blue-fg">(self, items)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>     <span class="ansi-green-fg">def</span> setups<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span>         set_trace<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">----&gt; 4</span><span class="ansi-red-fg">         </span>super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>setups<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-17-396fa7a48168&gt;</span> in <span class="ansi-cyan-fg">setups</span><span class="ansi-blue-fg">(self, items)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>     <span class="ansi-green-fg">def</span> setups<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> items<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span>         set_trace<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">----&gt; 4</span><span class="ansi-red-fg">         </span>super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>setups<span class="ansi-blue-fg">(</span>items<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/anaconda3/envs/dl/lib/python3.7/bdb.py</span> in <span class="ansi-cyan-fg">trace_dispatch</span><span class="ansi-blue-fg">(self, frame, event, arg)</span>
<span class="ansi-green-intense-fg ansi-bold">     86</span>             <span class="ansi-green-fg">return</span> <span class="ansi-red-fg"># None</span>
<span class="ansi-green-intense-fg ansi-bold">     87</span>         <span class="ansi-green-fg">if</span> event <span class="ansi-blue-fg">==</span> <span class="ansi-blue-fg">&#39;line&#39;</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 88</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>dispatch_line<span class="ansi-blue-fg">(</span>frame<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     89</span>         <span class="ansi-green-fg">if</span> event <span class="ansi-blue-fg">==</span> <span class="ansi-blue-fg">&#39;call&#39;</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     90</span>             <span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>dispatch_call<span class="ansi-blue-fg">(</span>frame<span class="ansi-blue-fg">,</span> arg<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/anaconda3/envs/dl/lib/python3.7/bdb.py</span> in <span class="ansi-cyan-fg">dispatch_line</span><span class="ansi-blue-fg">(self, frame)</span>
<span class="ansi-green-intense-fg ansi-bold">    111</span>         <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>stop_here<span class="ansi-blue-fg">(</span>frame<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">or</span> self<span class="ansi-blue-fg">.</span>break_here<span class="ansi-blue-fg">(</span>frame<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    112</span>             self<span class="ansi-blue-fg">.</span>user_line<span class="ansi-blue-fg">(</span>frame<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 113</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>quitting<span class="ansi-blue-fg">:</span> <span class="ansi-green-fg">raise</span> BdbQuit
<span class="ansi-green-intense-fg ansi-bold">    114</span>         <span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>trace_dispatch
<span class="ansi-green-intense-fg ansi-bold">    115</span> 

<span class="ansi-red-fg">BdbQuit</span>: </pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">debug</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&gt; <span class="ansi-green-fg">/home/lgvaz/anaconda3/envs/dl/lib/python3.7/collections/__init__.py</span>(655)<span class="ansi-cyan-fg">update</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">    653 </span><span class="ansi-red-fg">                    </span>super<span class="ansi-blue-fg">(</span>Counter<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>update<span class="ansi-blue-fg">(</span>iterable<span class="ansi-blue-fg">)</span> <span class="ansi-red-fg"># fast path when counter is empty</span>
<span class="ansi-green-fg">    654 </span><span class="ansi-red-fg">            </span><span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 655 </span><span class="ansi-red-fg">                </span>_count_elements<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> iterable<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">    656 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> kwds<span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">    657 </span><span class="ansi-red-fg">            </span>self<span class="ansi-blue-fg">.</span>update<span class="ansi-blue-fg">(</span>kwds<span class="ansi-blue-fg">)</span>

ipdb&gt; u
&gt; <span class="ansi-green-fg">/home/lgvaz/anaconda3/envs/dl/lib/python3.7/collections/__init__.py</span>(568)<span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">    566 </span><span class="ansi-red-fg">            </span><span class="ansi-green-fg">raise</span> TypeError<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;expected at most 1 arguments, got %d&#39;</span> <span class="ansi-blue-fg">%</span> len<span class="ansi-blue-fg">(</span>args<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">    567 </span><span class="ansi-red-fg">        </span>super<span class="ansi-blue-fg">(</span>Counter<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>__init__<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 568 </span><span class="ansi-red-fg">        </span>self<span class="ansi-blue-fg">.</span>update<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwds<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">    569 </span>
<span class="ansi-green-fg">    570 </span><span class="ansi-red-fg">    </span><span class="ansi-green-fg">def</span> __missing__<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> key<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

ipdb&gt; u
&gt; <span class="ansi-green-fg">/home/lgvaz/git/fastai2/fastai2/text/data.py</span>(38)<span class="ansi-cyan-fg">setups</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     36 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> dsets <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span> <span class="ansi-green-fg">return</span>
<span class="ansi-green-fg">     37 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>vocab <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 38 </span><span class="ansi-red-fg">            </span>count <span class="ansi-blue-fg">=</span> dsets<span class="ansi-blue-fg">.</span>counter <span class="ansi-green-fg">if</span> hasattr<span class="ansi-blue-fg">(</span>dsets<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;counter&#39;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">else</span> Counter<span class="ansi-blue-fg">(</span>p <span class="ansi-green-fg">for</span> o <span class="ansi-green-fg">in</span> dsets <span class="ansi-green-fg">for</span> p <span class="ansi-green-fg">in</span> o<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     39 </span><span class="ansi-red-fg">            </span>self<span class="ansi-blue-fg">.</span>vocab <span class="ansi-blue-fg">=</span> make_vocab<span class="ansi-blue-fg">(</span>count<span class="ansi-blue-fg">,</span> min_freq<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>min_freq<span class="ansi-blue-fg">,</span> max_vocab<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>max_vocab<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     40 </span><span class="ansi-red-fg">            </span>self<span class="ansi-blue-fg">.</span>o2i <span class="ansi-blue-fg">=</span> defaultdict<span class="ansi-blue-fg">(</span>int<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">{</span>v<span class="ansi-blue-fg">:</span>k <span class="ansi-green-fg">for</span> k<span class="ansi-blue-fg">,</span>v <span class="ansi-green-fg">in</span> enumerate<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>vocab<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">if</span> v <span class="ansi-blue-fg">!=</span> <span class="ansi-blue-fg">&#39;xxfake&#39;</span><span class="ansi-blue-fg">}</span><span class="ansi-blue-fg">)</span>

ipdb&gt; self.vocab
ipdb&gt; l
<span class="ansi-green-intense-fg ansi-bold">     33 </span>        self<span class="ansi-blue-fg">.</span>o2i <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">if</span> vocab <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">else</span> defaultdict<span class="ansi-blue-fg">(</span>int<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">{</span>v<span class="ansi-blue-fg">:</span>k <span class="ansi-green-fg">for</span> k<span class="ansi-blue-fg">,</span>v <span class="ansi-green-fg">in</span> enumerate<span class="ansi-blue-fg">(</span>vocab<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">}</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     34 </span>
<span class="ansi-green-intense-fg ansi-bold">     35 </span>    <span class="ansi-green-fg">def</span> setups<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> dsets<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     36 </span>        <span class="ansi-green-fg">if</span> dsets <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span> <span class="ansi-green-fg">return</span>
<span class="ansi-green-intense-fg ansi-bold">     37 </span>        <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>vocab <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 38 </span><span class="ansi-red-fg">            </span>count <span class="ansi-blue-fg">=</span> dsets<span class="ansi-blue-fg">.</span>counter <span class="ansi-green-fg">if</span> hasattr<span class="ansi-blue-fg">(</span>dsets<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;counter&#39;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">else</span> Counter<span class="ansi-blue-fg">(</span>p <span class="ansi-green-fg">for</span> o <span class="ansi-green-fg">in</span> dsets <span class="ansi-green-fg">for</span> p <span class="ansi-green-fg">in</span> o<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     39 </span>            self<span class="ansi-blue-fg">.</span>vocab <span class="ansi-blue-fg">=</span> make_vocab<span class="ansi-blue-fg">(</span>count<span class="ansi-blue-fg">,</span> min_freq<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>min_freq<span class="ansi-blue-fg">,</span> max_vocab<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>max_vocab<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     40 </span>            self<span class="ansi-blue-fg">.</span>o2i <span class="ansi-blue-fg">=</span> defaultdict<span class="ansi-blue-fg">(</span>int<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">{</span>v<span class="ansi-blue-fg">:</span>k <span class="ansi-green-fg">for</span> k<span class="ansi-blue-fg">,</span>v <span class="ansi-green-fg">in</span> enumerate<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>vocab<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">if</span> v <span class="ansi-blue-fg">!=</span> <span class="ansi-blue-fg">&#39;xxfake&#39;</span><span class="ansi-blue-fg">}</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     41 </span>
<span class="ansi-green-intense-fg ansi-bold">     42 </span>    <span class="ansi-green-fg">def</span> encodes<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> o<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span> <span class="ansi-green-fg">return</span> TensorText<span class="ansi-blue-fg">(</span>tensor<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">[</span>self<span class="ansi-blue-fg">.</span>o2i  <span class="ansi-blue-fg">[</span>o_<span class="ansi-blue-fg">]</span> <span class="ansi-green-fg">for</span> o_ <span class="ansi-green-fg">in</span> o<span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     43 </span>    <span class="ansi-green-fg">def</span> decodes<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> o<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span> <span class="ansi-green-fg">return</span> L<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>vocab<span class="ansi-blue-fg">[</span>o_<span class="ansi-blue-fg">]</span> <span class="ansi-green-fg">for</span> o_ <span class="ansi-green-fg">in</span> o <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>vocab<span class="ansi-blue-fg">[</span>o_<span class="ansi-blue-fg">]</span> <span class="ansi-blue-fg">!=</span> PAD<span class="ansi-blue-fg">)</span>

ipdb&gt; self
Numericalize: (object,object) -&gt; encodes (object,object) -&gt; decodes
ipdb&gt; exit
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dset_train</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dls</span> <span class="o">=</span> <span class="n">DataLoaders</span><span class="o">.</span><span class="n">from_dsets</span><span class="p">(</span><span class="n">dset_train</span><span class="p">,</span> <span class="n">dset_valid</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">default_device</span><span class="p">(),</span> <span class="n">drop_last</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">MajorityLabelVoter</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">acc</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span><span class="n">targ</span><span class="p">):</span> <span class="k">return</span> <span class="p">(</span><span class="n">inp</span><span class="o">==</span><span class="n">targ</span><span class="p">)</span><span class="o">.</span><span class="n">float</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">learn</span> <span class="o">=</span> <span class="n">Learner</span><span class="p">(</span><span class="n">dls</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">loss_func</span><span class="o">=</span><span class="k">lambda</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="n">tensor</span><span class="p">(</span><span class="mf">0.</span><span class="p">),</span> <span class="n">metrics</span><span class="o">=</span><span class="n">acc</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">preds</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">learn</span><span class="o">.</span><span class="n">get_preds</span><span class="p">(</span><span class="n">dl</span><span class="o">=</span><span class="n">dls</span><span class="o">.</span><span class="n">valid</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">learn</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(#2) [0.0,0.46000000834465027]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">(</span><span class="n">preds</span><span class="p">[</span><span class="n">idxs</span><span class="p">]</span><span class="o">==</span><span class="n">lbls_true</span><span class="p">[</span><span class="n">idxs</span><span class="p">])</span><span class="o">.</span><span class="n">float</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>tensor(0.7080)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># How to apply in parellel</span>
<span class="n">task_lbls</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="n">o</span><span class="o">.</span><span class="n">data</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">tls</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># lbls[lbls==vocab.o2i[ABSTAIN]] = -1</span>
<span class="c1"># Only works because ABSTAIN is already 0</span>
<span class="n">task_lbls</span> <span class="o">-=</span> <span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">task_lbls_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">task_lbls</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># lbl_m = LabelModel(2, verbose=True)</span>
<span class="n">lbl_m</span> <span class="o">=</span> <span class="n">MajorityLabelVoter</span><span class="p">()</span>
<span class="c1"># lbl_m.fit(task_lbls_arr, n_epochs=500, log_freq=100)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lbl_m</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">task_lbls_arr</span><span class="p">,</span> <span class="n">lbls_true</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>WARNING:root:Metrics calculated over data points with non-abstain labels only
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;accuracy&#39;: 0.7165775401069518}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dls</span> <span class="o">=</span> <span class="n">tls</span><span class="o">.</span><span class="n">dataloaders</span><span class="p">(</span><span class="n">shuffe</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">dls</span><span class="o">.</span><span class="n">one_batch</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>3</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ToTensor</span><span class="p">()(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>TensorCategory(0)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

